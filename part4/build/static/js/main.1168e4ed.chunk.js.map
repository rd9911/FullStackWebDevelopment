{"version":3,"sources":["components/Blog.js","components/Login.js","components/Toggable.js","components/BlogForm.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Blog","blog","onLikeBlog","onRemoveBlog","useState","fullDetails","setFullDetails","handleChangeFullDetails","className","title","author","url","likes","value","onClick","id","Login","onLogin","username","setUsername","password","setPassword","loginSubmit","event","a","preventDefault","userToLogin","onSubmit","type","name","onChange","target","Toggable","React","forwardRef","props","ref","formVisible","setFormVisible","handleCreateBlogClick","useImperativeHandle","style","display","btnLabel","children","displayName","CreateForm","onBlogPost","setTitle","setUrl","setAuthor","postBlog","blogToPost","baseUrl","token","getAll","axios","get","then","response","data","create","config","headers","Authorization","post","setToken","tokenFromUser","likeBlog","blogId","put","deleteBlog","delete","login","user","App","blogs","setBlogs","errorMessage","setErrorMessage","setUser","useEffect","blogService","isMounted","loggedUserJSON","window","localStorage","getItem","JSON","parse","loginRef","useRef","blogRef","current","loginService","loggedUser","setItem","stringify","console","log","setTimeout","postedBlog","concat","like","likedBlog","updatedBlogs","map","removeBlog","blogToRemove","confirm","deletedBlog","filter","removeItem","clear","sort","b","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1168e4ed.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Blog = ({ blog, onLikeBlog, onRemoveBlog }) => {\n\n  const [fullDetails, setFullDetails] = useState(false)\n\n  const handleChangeFullDetails = () => {\n    setFullDetails(!fullDetails)\n  }\n\n  return (\n    <div>\n      {fullDetails\n        ?\n        <div className='detail-view'>\n          {blog.title} by {blog.author} on {blog.url} likes {blog.likes}\n          <button value='like' onClick={() => onLikeBlog(blog.id)} >like</button>\n          <button value='delete' onClick={() => onRemoveBlog(blog.id, blog)} >delete</button>\n          <button value='hide' onClick={handleChangeFullDetails} >hide</button>\n        </div>\n        :\n        <div className='short-view'>\n          {blog.title} by {blog.author}\n          <button value='view' onClick={handleChangeFullDetails} >view</button>\n        </div>\n      }\n    </div>\n  )\n}\n\nBlog.propTypes = {\n  blog: PropTypes.object.isRequired,\n  // onLikeBlog: PropTypes.func.isRequired,\n  // onRemoveBlog: PropTypes.func.isRequired\n}\n\nexport default Blog","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n\n\nconst Login = ({ onLogin }) => {\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n\n  const loginSubmit = async (event) => {\n    event.preventDefault()\n    const userToLogin = {\n      username: username,\n      password: password\n    }\n    await onLogin(userToLogin)\n    setUsername('')  // GETTING WARNING. FIX IT!!!\n    setPassword('')\n  }\n\n  return (\n    <form onSubmit={loginSubmit}>\n        username <input type='text' name='username' id='getUsername' value={username} onChange={({ target }) => setUsername(target.value)} />\n      <br /> password <input type='text' name='password' id='getPassword' value={password} onChange={({ target }) => setPassword(target.value)} />\n      <input type='submit' name='submit' id='submitForm' value='Submit' />\n    </form>\n  )\n}\n\nLogin.propTypes = {\n  onLogin: PropTypes.func.isRequired\n}\n\nexport default Login","import React, { useState, useImperativeHandle } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Toggable = React.forwardRef((props, ref) => {\n  const [formVisible, setFormVisible] = useState(false)\n\n  const handleCreateBlogClick = () => {\n    setFormVisible(!formVisible)\n  }\n\n  useImperativeHandle(ref, () => {\n    return {\n      handleCreateBlogClick\n    }\n  })\n\n  return (\n    <div>\n      <div style={{ display: formVisible ? 'None' : '' }}>\n        <input className='changable-btn' type='button' value={props.btnLabel} onClick={handleCreateBlogClick} />\n      </div>\n      <div style={{ display: formVisible ? '' : 'None' }} className='show-child'>\n        {props.children}\n        <input type='button' value='cancel' onClick={handleCreateBlogClick} />\n      </div>\n    </div>\n  )\n})\n\nToggable.displayName = 'Toggable'\n\nToggable.propTypes = {\n  btnLabel: PropTypes.string.isRequired,\n}\n\nexport default Toggable","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n\nconst CreateForm = ({ onBlogPost }) => {\n  const [title, setTitle] = useState('')\n  const [url, setUrl] = useState('')\n  const [author, setAuthor] = useState('')\n\n  const postBlog = async (event) => {\n    event.preventDefault()\n    const blogToPost = {\n      title: title,\n      author: author,\n      url: url\n    }\n    const postedBlog = await onBlogPost(blogToPost)\n    if (postedBlog) {\n      setTitle('')\n      setAuthor('')\n      setUrl('')\n    }\n  }\n\n  return (\n    <div>\n            Create new\n      <form onSubmit={postBlog}>\n        title <input className = 'title' value={title} onChange={({ target }) => { setTitle(target.value)} } /><br />\n        author <input className ='author' value={author} onChange={({ target }) => { setAuthor(target.value)} } /><br />\n        url <input className='url' value={url} onChange={({ target }) => { setUrl(target.value)} } /><br />\n        <input type='submit' value='create' />\n      </form>\n    </div>\n\n  )\n}\n\nCreateForm.propTypes = {\n  onBlogPost: PropTypes.func.isRequired\n}\n\nexport default CreateForm","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst setToken = (tokenFromUser) => {\n  token = `bearer ${tokenFromUser}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async (blog) => {\n  const config = {\n    headers: {\n      Authorization: token\n    }\n  }\n  const response = await axios.post(baseUrl, blog, config)\n  return response.data\n}\n\nconst likeBlog = async (blogId) => {\n  if (token) {\n    const config = {\n      headers: {\n        Authorization: token\n      }\n    }\n    const response = await axios.put(`${baseUrl}/${blogId}`, config)\n    return response.data\n  }\n}\n\nconst deleteBlog = async (blogId) => {\n  if (token) {\n    const config = {\n      headers: {\n        Authorization: token\n      }\n    }\n    const response = await axios.delete(`${baseUrl}/${blogId}`, config)\n    return response.data\n  }\n}\n\nexport default { getAll, create, setToken, likeBlog, deleteBlog }","\nimport axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async (user) => {\n  const response = await axios.post(baseUrl, user)\n  return response.data\n}\n\nexport default { login }","import React, { useState, useEffect, useRef } from 'react'\nimport Blog from './components/Blog'\nimport Login from './components/Login'\nimport Toggable from './components/Toggable'\nimport CreateForm from './components/BlogForm'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\n\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [errorMessage, setErrorMessage] = useState('')\n  const [user, setUser] = useState('')\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs( blogs )\n    )\n  }, [])\n\n  useEffect(() => {\n    let isMounted = true\n    const loggedUserJSON = window.localStorage.getItem('loggedUserJSON')\n    if (isMounted && loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n    }\n    return () => { isMounted = false }\n  }, [])\n\n  const loginRef = useRef()\n  const blogRef = useRef()\n\n\n\n  const login = async (userToLogin) => {\n    try {\n      loginRef.current.handleCreateBlogClick()\n      const loggedUser = await loginService.login(userToLogin) // services.login(username, passwordtel )\n      setUser(loggedUser)\n      window.localStorage.setItem('loggedUserJSON', JSON.stringify(loggedUser))\n      return loggedUser\n    } catch(err) {\n      console.log(err)\n      setErrorMessage('invalid username or password')\n      setTimeout(() => { setErrorMessage('') }, 3000)\n    }\n  }\n  const logout = () => {\n    window.localStorage.removeItem('user')\n    window.localStorage.clear()\n    setUser('')\n  }\n\n  const postBlog = async (blogToPost) => {\n    try {\n      blogRef.current.handleCreateBlogClick()\n      const postedBlog = await blogService.create(blogToPost)\n      setBlogs(blogs.concat(postedBlog))\n      setErrorMessage(`a new blog ${postedBlog.title} by ${postedBlog.author}`)\n      setTimeout(() => { setErrorMessage('') }, 3000)\n      return postedBlog\n    } catch (error) {\n      setErrorMessage(error)\n      setTimeout(() => { setErrorMessage('') }, 3000)\n    }\n  }\n\n  const like = async (blogId) => { // Chnage name of function\n    try {\n      const likedBlog = await blogService.likeBlog(blogId)\n      const updatedBlogs = blogs.map(blog => {\n        if (likedBlog.id === blog.id) {\n          blog.likes += 1\n        }\n        return blog\n      })\n      setBlogs(updatedBlogs)\n      setErrorMessage(`a new blog ${likedBlog.title} is liked by ${user.username}`)\n      setTimeout(() => { setErrorMessage('') }, 3000)\n    } catch(error) {\n      setErrorMessage(error)\n      setTimeout(() => setErrorMessage(''), 3000)\n    }\n  }\n\n  const removeBlog = async (blogId, blogToRemove) => {\n    const confirm = window.confirm(`Remove blog ${blogToRemove.title} by ${blogToRemove.author}?`)\n    if (confirm) {\n      try {\n        console.log(blogToRemove)\n        const deletedBlog = await blogService.deleteBlog(blogId)\n        console.log(deletedBlog)\n        setBlogs(blogs.filter(blog => blog.id !== deletedBlog.id))\n      } catch(error) {\n        setErrorMessage(error)\n        setTimeout(() => setErrorMessage(''), 3000)\n      }\n    }\n  }\n\n  return (\n    <div>\n      <div>\n        <h3>{errorMessage}</h3>\n\n        {user\n\n          ? <div>\n            <p>{user.username} logged in</p> <input type='button' value='logout' onClick={logout} />\n            <Toggable btnLabel='create blog' ref={blogRef} >\n              <CreateForm onBlogPost={postBlog} />\n            </Toggable>\n\n            <div>\n              <h2>blogs</h2>\n              {blogs.sort((a, b) =>  b.likes - a.likes).map(blog =>\n                <Blog key={blog.id} blog={blog} onLikeBlog={like} onRemoveBlog={removeBlog} />\n              )}\n            </div>\n          </div>\n\n          : <div>\n            <h2>Login</h2>\n            <Toggable btnLabel='log in' ref={loginRef} >\n              <Login onLogin={login} />\n            </Toggable>\n          </div>\n        }\n      </div>\n\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}