{"version":3,"sources":["components/Blog.js","components/Login.js","components/Toggable.js","components/CreateForm.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Blog","blog","onLikeBlog","onRemoveBlog","useState","fullDetails","setFullDetails","handleChangeFullDetails","e","title","author","url","likes","value","onClick","id","Login","props","username","setUsername","password","setPassword","loginSubmit","event","a","preventDefault","userToLogin","onLogin","onSubmit","type","name","onChange","target","Toggable","React","forwardRef","ref","formVisible","setFormVisible","handleCreateBlogClick","useImperativeHandle","style","display","btnLabel","children","CreateForm","setTitle","setUrl","setAuthor","postBlog","blogToPost","onBlogPost","baseUrl","token","getAll","axios","get","then","response","data","create","config","headers","Authorization","post","setToken","tokenFromUser","likeBlog","blogId","put","deleteBlog","console","log","delete","login","user","App","blogs","setBlogs","errorMessage","setErrorMessage","setUser","useEffect","blogService","isMounted","loggedUserJSON","window","localStorage","getItem","JSON","parse","loginRef","useRef","blogRef","current","loginService","loggedUser","setItem","stringify","setTimeout","postedBlog","concat","like","likedBlog","updatedBlogs","map","removeBlog","deletedBlog","filter","removeItem","clear","sort","b","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9a0d30f7.chunk.js","sourcesContent":["import React, { useState } from 'react'\nconst Blog = ({blog, onLikeBlog, onRemoveBlog}) => {\n  const [fullDetails, setFullDetails] = useState(false)\n\n  const handleChangeFullDetails = (e) => {\n    setFullDetails(!fullDetails)\n  }\n  \n  return (\n    <div>\n      {fullDetails \n      ? \n        <div>\n          {blog.title} by {blog.author} on {blog.url} likes {blog.likes}\n          <button value='like' onClick={() => onLikeBlog(blog.id)} >like</button>\n          <button value='delete' onClick={() => onRemoveBlog(blog.id)} >delete</button>\n          <button value='hide' onClick={handleChangeFullDetails} >hide</button>\n        </div>\n      : \n      <div>\n        {blog.title} by {blog.author}\n        <button value='view' onClick={handleChangeFullDetails} >view</button>\n      </div>\n      }\n    </div>  \n  )\n}\n\nexport default Blog","import React, { useState } from \"react\"\n\nconst Login = (props) => {\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n\n    const loginSubmit = async (event) => {\n        event.preventDefault()\n        const userToLogin = {\n          username: username,\n          password: password\n        }\n        await props.onLogin(userToLogin)\n        setUsername('')  // GETTING WARNING. FIX IT!!!\n        setPassword('')  \n      }\n\n    return (\n    <form onSubmit={loginSubmit}>\n        username <input type='text' name='username' id='getUsername' value={username} onChange={({target}) => setUsername(target.value)} />\n        <br /> password <input type='text' name='password' id='getPassword' value={password} onChange={({target}) => setPassword(target.value)} />\n        <input type='submit' name='submit' id='submitForm' value='Submit' />\n    </form>\n    )\n}\n\nexport default Login","import React, { useState, useImperativeHandle } from \"react\"\n\n\nconst Toggable = React.forwardRef((props, ref) => {\n    const [formVisible, setFormVisible] = useState(false)\n\n    const handleCreateBlogClick = (e) => {\n        setFormVisible(!formVisible)\n      }\n\n    useImperativeHandle(ref, () => {\n        return {\n            handleCreateBlogClick\n        }\n    })\n\n    return (\n        <div>\n            <div style={{display: formVisible ? 'None' : ''}}>\n                <input type='button' value={props.btnLabel} onClick={handleCreateBlogClick} />\n            </div>\n            <div style={{display: formVisible ? '' : 'None'}}>\n                {props.children}\n                <input type='button' value='cancel' onClick={handleCreateBlogClick} />\n            </div>\n        </div>\n    )\n})\n\nexport default Toggable","import React, {useState} from \"react\"\n\nconst CreateForm = (props) => {\n    const [title, setTitle] = useState('')\n    const [url, setUrl] = useState('')\n    const [author, setAuthor] = useState('')\n\n    const postBlog = async (event) => {\n        event.preventDefault()\n        const blogToPost = {\n          title: title,\n          author: author,\n          url: url\n        }\n        const postedBlog = await props.onBlogPost(blogToPost)\n        if (postedBlog) {\n            setTitle('')\n            setAuthor('')\n            setUrl('')\n        }\n      }\n\n    return (\n        <div>\n            Create new\n            <form onSubmit={postBlog}>\n                title <input value={title} onChange={({target}) => { setTitle(target.value)} } /><br />\n                author <input value={author} onChange={({target}) => { setAuthor(target.value)} } /><br />\n                url <input value={url} onChange={({target}) => { setUrl(target.value)} } /><br />\n                <input type='submit' value='create' />\n            </form>\n        </div>\n        \n    )\n}\n\nexport default CreateForm","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null;\n\nconst setToken = (tokenFromUser) => {\n  token = `bearer ${tokenFromUser}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async (blog) => {\n  const config = {\n    headers: {\n      Authorization: token\n    }\n  }\n  const response = await axios.post(baseUrl, blog, config)\n  return response.data\n}\n\nconst likeBlog = async (blogId) => {\n  if (token) {\n    const config = {\n      headers: {\n        Authorization: token\n      }\n    }\n    const response = await axios.put(`${baseUrl}/${blogId}`, config)\n    return response.data\n  }\n}\n\nconst deleteBlog = async (blogId) => {\n  if (token) {\n    console.log(token)\n    const config = {\n      headers: {\n        Authorization: token\n      }\n    }\n    const response = await axios.delete(`${baseUrl}/${blogId}`, config)\n    console.log(response.data)\n    return response.data\n  }\n}\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default { getAll, create, setToken, likeBlog, deleteBlog }\n","/* eslint-disable import/no-anonymous-default-export */\nimport axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async (user) => {\n    const response = await axios.post(baseUrl, user);\n    return response.data;\n  }\n  \nexport default { login }","import React, { useState, useEffect, useRef } from 'react'\nimport Blog from './components/Blog'\nimport Login from './components/Login'\nimport Toggable from './components/Toggable'\nimport CreateForm from './components/CreateForm'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\n\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [errorMessage, setErrorMessage] = useState('')\n  const [user, setUser] = useState('')\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs( blogs )\n    )  \n  }, [])\n\n  useEffect(() => {\n    let isMounted = true;\n    const loggedUserJSON = window.localStorage.getItem('loggedUserJSON')\n    if (isMounted && loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      setUser(user)\n      blogService.setToken(user.token)\n    }\n    return () => { isMounted = false }\n  }, [])\n\n  const loginRef = useRef()\n  const blogRef = useRef()\n\n\n  \n  const login = async (userToLogin) => {\n    try {\n      loginRef.current.handleCreateBlogClick()\n      const loggedUser = await loginService.login(userToLogin) // services.login(username, passwordtel )\n      setUser(loggedUser)\n      window.localStorage.setItem('loggedUserJSON', JSON.stringify(loggedUser))\n      return loggedUser;\n    } catch(err) {\n      console.log(err)\n      setErrorMessage('invalid username or password')\n      setTimeout(() => { setErrorMessage('') }, 3000)\n    }\n  }\n  const logout = () => {\n    window.localStorage.removeItem('user')\n    window.localStorage.clear()\n    setUser('')\n  }\n\n  const postBlog = async (blogToPost) => {\n    try {\n      blogRef.current.handleCreateBlogClick()\n      const postedBlog = await blogService.create(blogToPost)\n      setBlogs(blogs.concat(postedBlog))\n      setErrorMessage(`a new blog ${postedBlog.title} by ${postedBlog.author}`)\n      setTimeout(() => { setErrorMessage('') }, 3000)\n      return postedBlog\n    } catch (error) {\n      setErrorMessage(error)\n      setTimeout(() => { setErrorMessage('') }, 3000)\n    }\n  }\n\n  const like = async (blogId) => { // Chnage name of function\n    try {\n      const likedBlog = await blogService.likeBlog(blogId)\n      const updatedBlogs = blogs.map(blog => {\n        if (likedBlog.id === blog.id) {\n          blog.likes += 1\n        }\n        return blog\n      })\n      setBlogs(updatedBlogs)\n      setErrorMessage(`a new blog ${likedBlog.title} is liked by ${user.username}`)\n      setTimeout(() => { setErrorMessage('') }, 3000)\n    } catch(error) {\n      setErrorMessage(error)\n      setTimeout(() => setErrorMessage(''), 3000)\n    }\n  }\n\n  const removeBlog = async (blogId) => {\n    try {\n      console.log(blogId)\n      const deletedBlog = await blogService.deleteBlog(blogId)\n      console.log(deletedBlog)\n      setBlogs(blogs.filter(blog => blog.id !== deletedBlog.id))\n    } catch(error) {\n      setErrorMessage(error)\n      setTimeout(() => setErrorMessage(''), 3000)\n    }\n  } \n\n  return (\n    <div>\n      <div>\n        <h3>{errorMessage}</h3>\n        \n        {user\n\n          ? <div>\n              <p>{user.username} logged in</p> <input type='button' value='logout' onClick={logout} />\n              <Toggable btnLabel='create blog' ref={blogRef} >\n                <CreateForm onBlogPost={postBlog} />\n              </Toggable> \n\n              <div>\n                <h2>blogs</h2>\n                {blogs.sort((a, b) =>  b - a)\n                    .map(blog =>\n                      <Blog key={blog.id} blog={blog} onLikeBlog={like} onRemoveBlog={removeBlog} /> \n                    )}\n              </div>\n            </div>\n\n          : <div>\n            <h2>Login</h2>\n            <Toggable btnLabel='login' ref={loginRef} >\n              <Login onLogin={login} />\n            </Toggable>\n          </div>\n      }\n      </div>\n      \n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}